<!-- Validator configuration form -->
<form class="validator-config p-4 space-y-4"
      hx-put="/api/validator/config"
      hx-target="#main-content">
    
    <!-- Error messages -->
    {% if !errors.is_empty() %}
    <div class="errors bg-red-50 border-red-200 text-red-700 p-4 rounded-lg">
        {% for error in errors %}
        <p>{{ error }}</p>
        {% endfor %}
    </div>
    {% endif %}

    <!-- Max modules -->
    <div class="form-group">
        <label for="max_modules" class="block text-sm font-medium text-gray-700">
            Maximum Modules
        </label>
        <input type="number"
               id="max_modules"
               name="max_modules"
               value="{{ config.max_modules }}"
               min="1"
               max="100"
               class="mt-1 block w-full rounded-md border-gray-300 shadow-sm"
               required>
        <p class="mt-1 text-sm text-gray-500">
            Maximum number of modules to validate simultaneously
        </p>
    </div>

    <!-- Timeout -->
    <div class="form-group">
        <label for="timeout_ms" class="block text-sm font-medium text-gray-700">
            Response Timeout (ms)
        </label>
        <input type="number"
               id="timeout_ms"
               name="timeout_ms"
               value="{{ config.timeout_ms }}"
               min="1000"
               max="30000"
               step="100"
               class="mt-1 block w-full rounded-md border-gray-300 shadow-sm"
               required>
        <p class="mt-1 text-sm text-gray-500">
            Maximum time to wait for module responses
        </p>
    </div>

    <!-- Auto restart -->
    <div class="form-group">
        <label class="flex items-center">
            <input type="checkbox"
                   name="auto_restart"
                   {% if config.auto_restart %}checked{% endif %}
                   class="rounded border-gray-300 text-blue-600 shadow-sm">
            <span class="ml-2 text-sm text-gray-700">
                Auto-restart failed modules
            </span>
        </label>
    </div>

    <!-- Resource limits -->
    <div class="form-group">
        <h4 class="text-sm font-medium text-gray-700 mb-2">Resource Limits</h4>
        
        <!-- CPU limit -->
        <div class="ml-4 space-y-2">
            <label class="flex items-center">
                <span class="text-sm text-gray-600 w-24">CPU Cores:</span>
                <input type="number"
                       name="cpu_limit"
                       value="{{ config.cpu_limit|default(1.0) }}"
                       min="0.1"
                       max="8"
                       step="0.1"
                       class="w-24 rounded-md border-gray-300 shadow-sm">
            </label>
            
            <!-- Memory limit -->
            <label class="flex items-center">
                <span class="text-sm text-gray-600 w-24">Memory (MB):</span>
                <input type="number"
                       name="memory_limit"
                       value="{{ config.memory_limit|default(1024) }}"
                       min="128"
                       max="16384"
                       step="128"
                       class="w-24 rounded-md border-gray-300 shadow-sm">
            </label>
        </div>
    </div>

    <!-- Submit button -->
    <div class="flex justify-end">
        <button type="submit" 
                class="btn btn-primary"
                hx-disable>
            Save Configuration
        </button>
    </div>
</form>
